@(progress: Option[String] = None,
    title: String,
    currentForm: Option[Form[_]] = None,
    showLanguageSwitch: Boolean = false,
    showBanner: Boolean = true)(content: Html)(implicit lang: Lang,
    config: utils.helpers.Config
    )

@import views.html.common.{progressBar, protoType}
@import views.html.common.govMainDefault
@import uk.gov.dvla.vehicles.presentation.common
@import common.views.html.widgets.errorsSummary

@govMainDefault(title, showLanguageSwitch) {
    <div class="app vehicles-online">

        @if(showBanner) {
            @protoType()
        }

        @if(org.joda.time.DateTime.now.isAfter(
            new org.joda.time.DateTime(
                org.joda.time.DateTime.now().getYear,
                org.joda.time.DateTime.now().getMonthOfYear,
                org.joda.time.DateTime.now().getDayOfMonth,
                if (config.closing > 0) config.closing - 1 else config.closing, 59).minus(config.closingWarnPeriodMins * 60 * 1000)
        ) && org.joda.time.DateTime.now.isBefore(
            new org.joda.time.DateTime(
                org.joda.time.DateTime.now().getYear,
                org.joda.time.DateTime.now().getMonthOfYear,
                org.joda.time.DateTime.now().getDayOfMonth,
                if (config.closing > 0) config.closing - 1 else config.closing, 59)
        )) {
            <p>
                @Messages("global.serviceCloseWarning",
                    org.joda.time.DateTime.now.toString(org.joda.time.format.DateTimeFormat.forPattern("HH:mm:ss")),
                    config.closing
                )
            </p>
        }

        <div class="section-content">
        
            @progressBar(progress)

            @errorsSummary(currentForm)

            @content

        </div>
    </div>
}
